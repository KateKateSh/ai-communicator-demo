import streamlit as st
import json
from pathlib import Path

# –ü—É—Ç—å –∫ prompt-—à–∞–±–ª–æ–Ω—É
PROMPT_PATH = Path("prompts/event_template.txt")
SCENARIOS_PATH = Path("scenarios")

# –ó–∞–≥–ª—É—à–∫–∞: –∑–∞–≥—Ä—É–∑–∫–∞ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Å—Ü–µ–Ω–∞—Ä–∏—è (–Ω–∞ –∑–∞–º–µ–Ω—É LLM)
def mock_ai_response(event_text: str) -> str:
    for scenario_file in SCENARIOS_PATH.glob("*.json"):
        with open(scenario_file, "r", encoding="utf-8") as f:
            scenario = json.load(f)
            if scenario["event"] in event_text:
                return f"""üìå –ü—Ä–æ–≥–Ω–æ–∑: –≤—Å–ø–ª–µ—Å–∫ —Å–ø—Ä–æ—Å–∞ –ø–æ —Å—Ü–µ–Ω–∞—Ä–∏—é '{scenario['type']}' –≤ —Ä–µ–≥–∏–æ–Ω–µ {scenario['region']}

‚úÖ –î–µ–π—Å—Ç–≤–∏—è:
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–∞–º–ø–∞–Ω–∏—é: {scenario['campaign']}
- –ü–æ–¥–≥–æ—Ç–æ–≤—å—Ç–µ –ª–æ–≥–∏—Å—Ç–∏–∫—É
- –£–≤–µ–ª–∏—á—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –≤ –≤–∏—Ç—Ä–∏–Ω–µ
- –û—Ç–ø—Ä–∞–≤—å—Ç–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ

üë• –†–æ–ª–∏:
- –ú–∞—Ä–∫–µ—Ç–∏–Ω–≥
- –õ–æ–≥–∏—Å—Ç–∏–∫–∞
- –û–ø–µ—Ä–∞—Ü–∏–∏

üß† –ü–æ—á–µ–º—É:
–°–æ–±—ã—Ç–∏–µ –ø–æ–≤—ã—à–∞–µ—Ç –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –∑–∞–∫–∞–∑–∞ –Ω–∞ 25‚Äì40%. –ë—ã—Å—Ç—Ä–∞—è —Ä–µ–∞–∫—Ü–∏—è ‚Äî —ç—Ç–æ —Å–Ω–∏–∂–µ–Ω–∏–µ –ø–æ—Ç–µ—Ä—å –∏ —Ä–æ—Å—Ç —É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–µ–Ω–Ω–æ—Å—Ç–∏.
"""
    return "–ù–µ—Ç –ø–æ–¥—Ö–æ–¥—è—â–µ–≥–æ —Å—Ü–µ–Ω–∞—Ä–∏—è ‚Äî AI –ø–æ–∫–∞ –Ω–µ –æ–±—É—á–µ–Ω –Ω–∞ —ç—Ç–æ–º –∫–µ–π—Å–µ."

# Streamlit UI
st.set_page_config(page_title="AI-–∫–æ–º–º—É–Ω–∏–∫–∞—Ç–æ—Ä —Å–ø—Ä–æ—Å–∞", layout="centered")
st.title("ü§ñ AI-–∫–æ–º–º—É–Ω–∏–∫–∞—Ç–æ—Ä —Å–ø—Ä–æ—Å–∞")

event_text = st.text_area("–í–≤–µ–¥–∏—Ç–µ —Å–æ–±—ã—Ç–∏–µ", placeholder="–ü—Ä–∏–º–µ—Ä: 14 —Ñ–µ–≤—Ä–∞–ª—è –≤ –ú–æ—Å–∫–≤–µ —Å–Ω–µ–≥ + –∞–∫—Ü–∏—è –Ω–∞ —Ü–≤–µ—Ç—ã")

if st.button("–ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å"):
    if not event_text.strip():
        st.warning("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è.")
    else:
        st.markdown("‚è≥ –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º...")
        result = mock_ai_response(event_text)
        st.markdown(result)
